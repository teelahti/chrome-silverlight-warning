<!doctype html>
<html>
  <head>
    <title>Silverlight support on your browser is ending</title>

    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css">
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/grids-responsive-min.css">
    <style>
      .chrome #loading {
        display: none;
      }

      #notification {
        display: none;
      }

      .chrome #notification {
        display: block;
      }

    </style>
  </head>

  <body>
    <div id="loading">Loading...</div>

    <div class="pure-g">
        <div class="pure-u-1 pure-u-md-1-3"></div>
        <div class="pure-u-1 pure-u-md-1-3">
          <article id="notification">
            <h2>Important notification about Silverlight support</h2>

            <p>
              You are using Google Chrome browser, and
              <a href="http://blog.chromium.org/2014/11/the-final-countdown-for-npapi.html">
              Chrome is dropping Silverlight support very soon.</a></p>

            <h3>Here is what you should do</h3>
            <p>...instructions here</p>


            <form class="pure-form">
              <fieldset>
              <p>
                <label for="doNotShowAgain" class="pure-checkbox">
                  <input id="doNotShowAgain" type="checkbox" /> Do not show me this message again
                </label>
              </p>
              <button class="pure-button pure-button-primary" type="submit">Continue to application</button>
            </fieldset>
            </form>

          </article>

        </div>
        <div class="pure-u-1 pure-u-md-1-3"></div>
    </div>

    <script>
      (function() {
        var storageKey = "neveragain",
            isChrome = !!window.chrome,
            navigateToApp = function() {
              window.location = "app.html";
            };

        if (!isChrome) {
          navigateToApp();
          return;
        }

        // If user does not want to see this again, just skip
        if (localStorage.getItem(storageKey) !== null) {
          navigateToApp();
        }

        // Show notification and hide the loading... -box
        document.body.className = "chrome";

        // Bind form sending
        document.forms[0].addEventListener("submit", function(e) {
          var neverAgainCheckbox = document.getElementById("doNotShowAgain");

          if (neverAgainCheckbox.checked) {
            localStorage.setItem(storageKey, "1");
          }

          e.preventDefault();
          navigateToApp();
        });

      }());

    </script>

  </body>
</html>
